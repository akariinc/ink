"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[313],{"./node_modules/@akariinc/cdk/fesm2022/listbox.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M9:()=>CdkListboxModule});var a11y=__webpack_require__("./node_modules/@akariinc/cdk/fesm2022/a11y.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");const DIR_DOCUMENT=new core.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function DIR_DOCUMENT_FACTORY(){return(0,core.inject)(common.DOCUMENT)}});const RTL_LOCALE_PATTERN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function _resolveDirectionality(rawValue){const value=rawValue?.toLowerCase()||"";return"auto"===value&&"undefined"!=typeof navigator&&navigator?.language?RTL_LOCALE_PATTERN.test(navigator.language)?"rtl":"ltr":"rtl"===value?"rtl":"ltr"}class Directionality{constructor(_document){if(this.value="ltr",this.change=new core.EventEmitter,_document){const bodyDir=_document.body?_document.body.dir:null,htmlDir=_document.documentElement?_document.documentElement.dir:null;this.value=_resolveDirectionality(bodyDir||htmlDir||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.ɵfac=function Directionality_Factory(__ngFactoryType__){return new(__ngFactoryType__||Directionality)(core["ɵɵinject"](DIR_DOCUMENT,8))}}static{this.ɵprov=core["ɵɵdefineInjectable"]({token:Directionality,factory:Directionality.ɵfac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](Directionality,[{type:core.Injectable,args:[{providedIn:"root"}]}],(()=>[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:[DIR_DOCUMENT]}]}]),null);class Dir{constructor(){this._dir="ltr",this._isInitialized=!1,this.change=new core.EventEmitter}get dir(){return this._dir}set dir(value){const previousValue=this._dir;this._dir=_resolveDirectionality(value),this._rawDir=value,previousValue!==this._dir&&this._isInitialized&&this.change.emit(this._dir)}get value(){return this.dir}ngAfterContentInit(){this._isInitialized=!0}ngOnDestroy(){this.change.complete()}static{this.ɵfac=function Dir_Factory(__ngFactoryType__){return new(__ngFactoryType__||Dir)}}static{this.ɵdir=core["ɵɵdefineDirective"]({type:Dir,selectors:[["","dir",""]],hostVars:1,hostBindings:function Dir_HostBindings(rf,ctx){2&rf&&core["ɵɵattribute"]("dir",ctx._rawDir)},inputs:{dir:"dir"},outputs:{change:"dirChange"},exportAs:["dir"],standalone:!0,features:[core["ɵɵProvidersFeature"]([{provide:Directionality,useExisting:Dir}])]})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](Dir,[{type:core.Directive,args:[{selector:"[dir]",providers:[{provide:Directionality,useExisting:Dir}],host:{"[attr.dir]":"_rawDir"},exportAs:"dir",standalone:!0}]}],null,{change:[{type:core.Output,args:["dirChange"]}],dir:[{type:core.Input}]});class BidiModule{static{this.ɵfac=function BidiModule_Factory(__ngFactoryType__){return new(__ngFactoryType__||BidiModule)}}static{this.ɵmod=core["ɵɵdefineNgModule"]({type:BidiModule,imports:[Dir],exports:[Dir]})}static{this.ɵinj=core["ɵɵdefineInjector"]({})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](BidiModule,[{type:core.NgModule,args:[{imports:[Dir],exports:[Dir]}]}],null,null);var _ViewRepeaterOperation,coercion=__webpack_require__("@angular/cdk/coercion"),Subject=(__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isObservable.js"),__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"));!function(_ViewRepeaterOperation){_ViewRepeaterOperation[_ViewRepeaterOperation.REPLACED=0]="REPLACED",_ViewRepeaterOperation[_ViewRepeaterOperation.INSERTED=1]="INSERTED",_ViewRepeaterOperation[_ViewRepeaterOperation.MOVED=2]="MOVED",_ViewRepeaterOperation[_ViewRepeaterOperation.REMOVED=3]="REMOVED"}(_ViewRepeaterOperation||(_ViewRepeaterOperation={}));new core.InjectionToken("_ViewRepeater");class SelectionModel{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(_multiple=!1,initiallySelectedValues,_emitChanges=!0,compareWith){this._multiple=_multiple,this._emitChanges=_emitChanges,this.compareWith=compareWith,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Subject.B,initiallySelectedValues&&initiallySelectedValues.length&&(_multiple?initiallySelectedValues.forEach((value=>this._markSelected(value))):this._markSelected(initiallySelectedValues[0]),this._selectedToEmit.length=0)}select(...values){this._verifyValueAssignment(values),values.forEach((value=>this._markSelected(value)));const changed=this._hasQueuedChanges();return this._emitChangeEvent(),changed}deselect(...values){this._verifyValueAssignment(values),values.forEach((value=>this._unmarkSelected(value)));const changed=this._hasQueuedChanges();return this._emitChangeEvent(),changed}setSelection(...values){this._verifyValueAssignment(values);const oldValues=this.selected,newSelectedSet=new Set(values);values.forEach((value=>this._markSelected(value))),oldValues.filter((value=>!newSelectedSet.has(this._getConcreteValue(value,newSelectedSet)))).forEach((value=>this._unmarkSelected(value)));const changed=this._hasQueuedChanges();return this._emitChangeEvent(),changed}toggle(value){return this.isSelected(value)?this.deselect(value):this.select(value)}clear(flushEvent=!0){this._unmarkAll();const changed=this._hasQueuedChanges();return flushEvent&&this._emitChangeEvent(),changed}isSelected(value){return this._selection.has(this._getConcreteValue(value))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(predicate){this._multiple&&this.selected&&this._selected.sort(predicate)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(value){value=this._getConcreteValue(value),this.isSelected(value)||(this._multiple||this._unmarkAll(),this.isSelected(value)||this._selection.add(value),this._emitChanges&&this._selectedToEmit.push(value))}_unmarkSelected(value){value=this._getConcreteValue(value),this.isSelected(value)&&(this._selection.delete(value),this._emitChanges&&this._deselectedToEmit.push(value))}_unmarkAll(){this.isEmpty()||this._selection.forEach((value=>this._unmarkSelected(value)))}_verifyValueAssignment(values){if(values.length>1&&!this._multiple&&("undefined"==typeof ngDevMode||ngDevMode))throw function getMultipleValuesInSingleSelectionError(){return Error("Cannot pass multiple values into SelectionModel with single-value mode.")}()}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(inputValue,selection){if(this.compareWith){selection=selection??this._selection;for(let selectedValue of selection)if(this.compareWith(inputValue,selectedValue))return selectedValue;return inputValue}return inputValue}}class UniqueSelectionDispatcher{constructor(){this._listeners=[]}notify(id,name){for(let listener of this._listeners)listener(id,name)}listen(listener){return this._listeners.push(listener),()=>{this._listeners=this._listeners.filter((registered=>listener!==registered))}}ngOnDestroy(){this._listeners=[]}static{this.ɵfac=function UniqueSelectionDispatcher_Factory(__ngFactoryType__){return new(__ngFactoryType__||UniqueSelectionDispatcher)}}static{this.ɵprov=core["ɵɵdefineInjectable"]({token:UniqueSelectionDispatcher,factory:UniqueSelectionDispatcher.ɵfac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](UniqueSelectionDispatcher,[{type:core.Injectable,args:[{providedIn:"root"}]}],null,null);var keycodes=__webpack_require__("./node_modules/@akariinc/cdk/fesm2022/keycodes.mjs"),platform=__webpack_require__("@angular/cdk/platform"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),defer=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/defer.js"),merge=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),startWith=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/startWith.js"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),takeUntil=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),platform_browser=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/platform-browser.mjs");let nextId=0;class ListboxSelectionModel extends SelectionModel{constructor(multiple=!1,initiallySelectedValues,emitChanges=!0,compareWith){super(!0,initiallySelectedValues,emitChanges,compareWith),this.multiple=multiple}isMultipleSelection(){return this.multiple}select(...values){return this.multiple?super.select(...values):super.setSelection(...values)}}class CdkOption{constructor(){this._generatedId="cdk-option-"+nextId++,this.display=null,this._disabled=(0,core.signal)(!1),this._enabledTabIndex=(0,core.signal)(void 0),this.element=(0,core.inject)(core.ElementRef).nativeElement,this.listbox=(0,core.inject)(CdkListbox),this.renderer=(0,core.inject)(core.Renderer2),this.destroyed=new Subject.B,this._clicked=new Subject.B}get id(){return this._id||this._generatedId}set id(value){this._id=value}get disabled(){return this.listbox.disabled||this._disabled()}set disabled(value){this._disabled.set(value)}get enabledTabIndex(){return void 0===this._enabledTabIndex()?this.listbox.enabledTabIndex:this._enabledTabIndex()}set enabledTabIndex(value){this._enabledTabIndex.set(value)}ngOnInit(){this.renderer.setProperty(this.element,"innerHTML",this.display||this.value)}ngOnChanges(changes){("value"in changes&&!this.display||"display"in changes)&&("display"in changes&&this.renderer.setProperty(this.element,"innerHTML",changes.display.currentValue),"value"in changes&&this.renderer.setProperty(this.element,"innerHTML",changes.value.currentValue))}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}isSelected(){return this.listbox.isSelected(this)}isActive(){return this.listbox.isActive(this)}toggle(){this.listbox.toggle(this)}select(){this.listbox.select(this)}deselect(){this.listbox.deselect(this)}focus(){this.element.focus()}getLabel(){return(this.typeaheadLabel??this.element.textContent?.trim())||""}setActiveStyles(){this.listbox.useActiveDescendant&&this.element.scrollIntoView({block:"nearest",inline:"nearest"})}setInactiveStyles(){}_handleFocus(){this.listbox.useActiveDescendant&&(this.listbox._setActiveOption(this),this.listbox.focus())}_getTabIndex(){return this.listbox.useActiveDescendant||this.disabled?-1:this.isActive()?this.enabledTabIndex:-1}static{this.ɵfac=function CdkOption_Factory(__ngFactoryType__){return new(__ngFactoryType__||CdkOption)}}static{this.ɵdir=core["ɵɵdefineDirective"]({type:CdkOption,selectors:[["","cdkOption",""]],hostAttrs:["role","option",1,"cdk-option"],hostVars:6,hostBindings:function CdkOption_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("click",(function CdkOption_click_HostBindingHandler($event){return ctx._clicked.next($event)}))("focus",(function CdkOption_focus_HostBindingHandler(){return ctx._handleFocus()})),2&rf&&(core["ɵɵhostProperty"]("id",ctx.id),core["ɵɵattribute"]("aria-selected",ctx.isSelected())("tabindex",ctx._getTabIndex())("aria-disabled",ctx.disabled),core["ɵɵclassProp"]("cdk-option-active",ctx.isActive()))},inputs:{id:"id",value:[0,"cdkOption","value"],display:"display",typeaheadLabel:[0,"cdkOptionTypeaheadLabel","typeaheadLabel"],disabled:[2,"cdkOptionDisabled","disabled",core.booleanAttribute],enabledTabIndex:[0,"tabindex","enabledTabIndex"]},exportAs:["cdkOption"],standalone:!0,features:[core["ɵɵInputTransformsFeature"],core["ɵɵNgOnChangesFeature"]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](CdkOption,[{type:core.Directive,args:[{selector:"[cdkOption]",standalone:!0,exportAs:"cdkOption",host:{role:"option",class:"cdk-option","[id]":"id","[attr.aria-selected]":"isSelected()","[attr.tabindex]":"_getTabIndex()","[attr.aria-disabled]":"disabled","[class.cdk-option-active]":"isActive()","(click)":"_clicked.next($event)","(focus)":"_handleFocus()"}}]}],null,{id:[{type:core.Input}],value:[{type:core.Input,args:["cdkOption"]}],display:[{type:core.Input,args:["display"]}],typeaheadLabel:[{type:core.Input,args:["cdkOptionTypeaheadLabel"]}],disabled:[{type:core.Input,args:[{alias:"cdkOptionDisabled",transform:core.booleanAttribute}]}],enabledTabIndex:[{type:core.Input,args:["tabindex"]}]});class CdkListbox{get id(){return this._id||this._generatedId}set id(value){this._id=value}get enabledTabIndex(){return void 0===this._enabledTabIndex()?0:this._enabledTabIndex()}set enabledTabIndex(value){this._enabledTabIndex.set(value)}get value(){return this._invalid?[]:this.selectionModel.selected}set value(value){this._setSelection(value)}get multiple(){return this.selectionModel.multiple}set multiple(value){this.selectionModel.multiple=value,this.options&&this._updateInternalValue()}get disabled(){return this._disabled()}set disabled(value){this._disabled.set(value)}get useActiveDescendant(){return this._useActiveDescendant()}set useActiveDescendant(value){this._useActiveDescendant.set(value)}get orientation(){return this._orientation}set orientation(value){this._orientation="horizontal"===value?"horizontal":"vertical","horizontal"===value?this.listKeyManager?.withHorizontalOrientation(this._dir?.value||"ltr"):this.listKeyManager?.withVerticalOrientation()}get compareWith(){return this.selectionModel.compareWith}set compareWith(fn){this.selectionModel.compareWith=fn}get navigationWrapDisabled(){return this._navigationWrapDisabled}set navigationWrapDisabled(wrap){this._navigationWrapDisabled=wrap,this.listKeyManager?.withWrap(!this._navigationWrapDisabled)}get navigateDisabledOptions(){return this._navigateDisabledOptions}set navigateDisabledOptions(skip){this._navigateDisabledOptions=skip,this.listKeyManager?.skipPredicate(this._navigateDisabledOptions?this._skipNonePredicate:this._skipDisabledPredicate)}constructor(){this._generatedId="cdk-listbox-"+nextId++,this._enabledTabIndex=(0,core.signal)(void 0),this._disabled=(0,core.signal)(!1),this._useActiveDescendant=(0,core.signal)(!1),this._orientation="vertical",this._navigationWrapDisabled=!1,this._navigateDisabledOptions=!1,this.valueChange=new Subject.B,this.selectionModel=new ListboxSelectionModel,this.destroyed=new Subject.B,this.element=(0,core.inject)(core.ElementRef).nativeElement,this.ngZone=(0,core.inject)(core.NgZone),this.changeDetectorRef=(0,core.inject)(core.ChangeDetectorRef),this._invalid=!1,this._lastTriggered=null,this._onTouched=()=>{},this._onChange=()=>{},this._optionClicked=(0,defer.v)((()=>this.options.changes.pipe((0,startWith.Z)(this.options),(0,switchMap.n)((options=>(0,merge.h)(...options.map((option=>option._clicked.pipe((0,map.T)((event=>({option,event})))))))))))),this._dir=(0,core.inject)(Directionality,{optional:!0}),this._isBrowser=(0,core.inject)(platform.OD).isBrowser,this._skipDisabledPredicate=option=>option.disabled,this._skipNonePredicate=()=>!1,this._hasFocus=!1,this._previousActiveOption=null,this._isBrowser&&this._setPreviousActiveOptionAsActiveOptionOnWindowBlur()}ngAfterContentInit(){("undefined"==typeof ngDevMode||ngDevMode)&&(this._verifyNoOptionValueCollisions(),this._verifyOptionValues()),this._initKeyManager(),(0,merge.h)(this.selectionModel.changed,this.options.changes).pipe((0,startWith.Z)(null),(0,takeUntil.Q)(this.destroyed)).subscribe((()=>this._updateInternalValue())),this._optionClicked.pipe((0,filter.p)((({option})=>!option.disabled)),(0,takeUntil.Q)(this.destroyed)).subscribe((({option,event})=>this._handleOptionClicked(option,event)))}ngOnDestroy(){this.listKeyManager?.destroy(),this.destroyed.next(),this.destroyed.complete()}toggle(option){this.toggleValue(option.value)}toggleValue(value){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.toggle(value)}select(option){this.selectValue(option.value)}selectValue(value){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.select(value)}deselect(option){this.deselectValue(option.value)}deselectValue(value){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.deselect(value)}setAllSelected(isSelected){isSelected?(this._invalid&&this.selectionModel.clear(!1),this.selectionModel.select(...this.options.map((option=>option.value)))):this.selectionModel.clear()}isSelected(option){return this.isValueSelected(option.value)}isActive(option){return!(this.listKeyManager?.activeItem!==option)}isValueSelected(value){return!this._invalid&&this.selectionModel.isSelected(value)}registerOnChange(fn){this._onChange=fn}registerOnTouched(fn){this._onTouched=fn}writeValue(value){this._setSelection(value),this._verifyOptionValues()}setDisabledState(isDisabled){this.disabled=isDisabled,this.changeDetectorRef.markForCheck()}focus(){this.element.focus()}triggerOption(option){if(option&&!option.disabled){this._lastTriggered=option;(this.multiple?this.selectionModel.toggle(option.value):this.selectionModel.select(option.value))&&(this._onChange(this.value),this.valueChange.next({value:this.value,listbox:this,option}))}}triggerRange(trigger,from,to,on){if(this.disabled||trigger&&trigger.disabled)return;this._lastTriggered=trigger;const isEqual=this.compareWith??Object.is,updateValues=[...this.options].slice(Math.max(0,Math.min(from,to)),Math.min(this.options.length,Math.max(from,to)+1)).filter((option=>!option.disabled)).map((option=>option.value)),selected=[...this.value];for(const updateValue of updateValues){const selectedIndex=selected.findIndex((selectedValue=>isEqual(selectedValue,updateValue)));on&&-1===selectedIndex?selected.push(updateValue):on||-1===selectedIndex||selected.splice(selectedIndex,1)}this.selectionModel.setSelection(...selected)&&(this._onChange(this.value),this.valueChange.next({value:this.value,listbox:this,option:trigger}))}_setActiveOption(option){this.listKeyManager.setActiveItem(option)}_handleFocus(){this.useActiveDescendant||(this.selectionModel.selected.length>0?this._setNextFocusToSelectedOption():this.listKeyManager.setNextItemActive(),this._focusActiveOption())}_handleKeydown(event){if(this.disabled)return;const{keyCode}=event,previousActiveIndex=this.listKeyManager.activeItemIndex,ctrlKeys=["ctrlKey","metaKey"];if(this.multiple&&keyCode===keycodes.A&&(0,keycodes.rp)(event,...ctrlKeys))return this.triggerRange(null,0,this.options.length-1,this.options.length!==this.value.length),void event.preventDefault();if(this.multiple&&(keyCode===keycodes.t6||keyCode===keycodes.Fm)&&(0,keycodes.rp)(event,"shiftKey"))return this.listKeyManager.activeItem&&null!=this.listKeyManager.activeItemIndex&&this.triggerRange(this.listKeyManager.activeItem,this._getLastTriggeredIndex()??this.listKeyManager.activeItemIndex,this.listKeyManager.activeItemIndex,!this.listKeyManager.activeItem.isSelected()),void event.preventDefault();if(this.multiple&&keyCode===keycodes.yZ&&(0,keycodes.rp)(event,...ctrlKeys)&&(0,keycodes.rp)(event,"shiftKey")){const trigger=this.listKeyManager.activeItem;if(trigger){const from=this.listKeyManager.activeItemIndex;this.listKeyManager.setFirstItemActive(),this.triggerRange(trigger,from,this.listKeyManager.activeItemIndex,!trigger.isSelected())}return void event.preventDefault()}if(this.multiple&&keyCode===keycodes.Kp&&(0,keycodes.rp)(event,...ctrlKeys)&&(0,keycodes.rp)(event,"shiftKey")){const trigger=this.listKeyManager.activeItem;if(trigger){const from=this.listKeyManager.activeItemIndex;this.listKeyManager.setLastItemActive(),this.triggerRange(trigger,from,this.listKeyManager.activeItemIndex,!trigger.isSelected())}return void event.preventDefault()}if(keyCode===keycodes.t6||keyCode===keycodes.Fm)return this.triggerOption(this.listKeyManager.activeItem),void event.preventDefault();const isNavKey=keyCode===keycodes.i7||keyCode===keycodes.n6||keyCode===keycodes.UQ||keyCode===keycodes.LE||keyCode===keycodes.yZ||keyCode===keycodes.Kp;this.listKeyManager.onKeydown(event),isNavKey&&event.shiftKey&&previousActiveIndex!==this.listKeyManager.activeItemIndex&&this.triggerOption(this.listKeyManager.activeItem)}_handleFocusIn(){this._hasFocus=!0}_handleFocusOut(event){this._previousActiveOption=this.listKeyManager.activeItem;const otherElement=event.relatedTarget;this.element===otherElement||this.element.contains(otherElement)||(this._onTouched(),this._hasFocus=!1,this._setNextFocusToSelectedOption())}_getAriaActiveDescendant(){return this.useActiveDescendant?this.listKeyManager?.activeItem?.id:null}_getTabIndex(){return this.disabled?-1:this.useActiveDescendant||!this.listKeyManager.activeItem?this.enabledTabIndex:-1}_initKeyManager(){this.listKeyManager=new a11y.Au(this.options).withWrap(!this._navigationWrapDisabled).withTypeAhead().withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._navigateDisabledOptions?this._skipNonePredicate:this._skipDisabledPredicate),"vertical"===this.orientation?this.listKeyManager.withVerticalOrientation():this.listKeyManager.withHorizontalOrientation(this._dir?.value||"ltr"),this.selectionModel.selected.length&&Promise.resolve().then((()=>this._setNextFocusToSelectedOption())),this.listKeyManager.change.subscribe((()=>this._focusActiveOption())),this.options.changes.pipe((0,takeUntil.Q)(this.destroyed)).subscribe((()=>{const activeOption=this.listKeyManager.activeItem;activeOption&&!this.options.find((option=>option===activeOption))&&(this.listKeyManager.setActiveItem(-1),this.changeDetectorRef.markForCheck())}))}_focusActiveOption(){this.useActiveDescendant||this.listKeyManager.activeItem?.focus(),this.changeDetectorRef.markForCheck()}_setSelection(value){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.setSelection(...this._coerceValue(value)),this._hasFocus||this._setNextFocusToSelectedOption()}_setNextFocusToSelectedOption(){const selected=this.options?.find((option=>option.isSelected()));selected&&this.listKeyManager.updateActiveItem(selected)}_updateInternalValue(){const indexCache=new Map;this.selectionModel.sort(((a,b)=>this._getIndexForValue(indexCache,a)-this._getIndexForValue(indexCache,b)));const selected=this.selectionModel.selected;this._invalid=!this.multiple&&selected.length>1||!!this._getInvalidOptionValues(selected).length,this.changeDetectorRef.markForCheck()}_getIndexForValue(cache,value){const isEqual=this.compareWith||Object.is;if(!cache.has(value)){let index=-1;for(let i=0;i<this.options.length;i++)if(isEqual(value,this.options.get(i).value)){index=i;break}cache.set(value,index)}return cache.get(value)}_handleOptionClicked(option,event){event.preventDefault(),this.listKeyManager.setActiveItem(option),event.shiftKey&&this.multiple?this.triggerRange(option,this._getLastTriggeredIndex()??this.listKeyManager.activeItemIndex,this.listKeyManager.activeItemIndex,!option.isSelected()):this.triggerOption(option)}_verifyNoOptionValueCollisions(){this.options.changes.pipe((0,startWith.Z)(this.options),(0,takeUntil.Q)(this.destroyed)).subscribe((()=>{const isEqual=this.compareWith??Object.is;for(let i=0;i<this.options.length;i++){const option=this.options.get(i);let duplicate=null;for(let j=i+1;j<this.options.length;j++){const other=this.options.get(j);if(isEqual(option.value,other.value)){duplicate=other;break}}if(duplicate)return void(this.compareWith?console.warn("Found multiple CdkOption representing the same value under the given compareWith function",{option1:option.element,option2:duplicate.element,compareWith:this.compareWith}):console.warn("Found multiple CdkOption with the same value",{option1:option.element,option2:duplicate.element}))}}))}_verifyOptionValues(){if(this.options&&("undefined"==typeof ngDevMode||ngDevMode)){const selected=this.selectionModel.selected,invalidValues=this._getInvalidOptionValues(selected);if(!this.multiple&&selected.length>1)throw Error("Listbox cannot have more than one selected value in multi-selection mode.");if(invalidValues.length)throw Error("Listbox has selected values that do not match any of its options.")}}_coerceValue(value){return null==value?[]:(0,coercion.FG)(value)}_getInvalidOptionValues(values){const isEqual=this.compareWith||Object.is,validValues=(this.options||[]).map((option=>option.value));return values.filter((value=>!validValues.some((validValue=>isEqual(value,validValue)))))}_getLastTriggeredIndex(){const index=this.options.toArray().indexOf(this._lastTriggered);return-1===index?null:index}_setPreviousActiveOptionAsActiveOptionOnWindowBlur(){this.ngZone.runOutsideAngular((()=>{(0,fromEvent.R)(window,"blur").pipe((0,takeUntil.Q)(this.destroyed)).subscribe((()=>{this.element.contains(document.activeElement)&&this._previousActiveOption&&(this._setActiveOption(this._previousActiveOption),this._previousActiveOption=null)}))}))}static{this.ɵfac=function CdkListbox_Factory(__ngFactoryType__){return new(__ngFactoryType__||CdkListbox)}}static{this.ɵdir=core["ɵɵdefineDirective"]({type:CdkListbox,selectors:[["","cdkListbox",""]],contentQueries:function CdkListbox_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["ɵɵcontentQuery"](dirIndex,CdkOption,5),2&rf){let _t;core["ɵɵqueryRefresh"](_t=core["ɵɵloadQuery"]())&&(ctx.options=_t)}},hostAttrs:["role","listbox",1,"cdk-listbox"],hostVars:6,hostBindings:function CdkListbox_HostBindings(rf,ctx){1&rf&&core["ɵɵlistener"]("focus",(function CdkListbox_focus_HostBindingHandler(){return ctx._handleFocus()}))("keydown",(function CdkListbox_keydown_HostBindingHandler($event){return ctx._handleKeydown($event)}))("focusout",(function CdkListbox_focusout_HostBindingHandler($event){return ctx._handleFocusOut($event)}))("focusin",(function CdkListbox_focusin_HostBindingHandler(){return ctx._handleFocusIn()})),2&rf&&(core["ɵɵhostProperty"]("id",ctx.id),core["ɵɵattribute"]("tabindex",ctx._getTabIndex())("aria-disabled",ctx.disabled)("aria-multiselectable",ctx.multiple)("aria-activedescendant",ctx._getAriaActiveDescendant())("aria-orientation",ctx.orientation))},inputs:{id:"id",enabledTabIndex:[0,"tabindex","enabledTabIndex"],value:[0,"cdkListboxValue","value"],multiple:[2,"cdkListboxMultiple","multiple",core.booleanAttribute],disabled:[2,"cdkListboxDisabled","disabled",core.booleanAttribute],useActiveDescendant:[2,"cdkListboxUseActiveDescendant","useActiveDescendant",core.booleanAttribute],orientation:[0,"cdkListboxOrientation","orientation"],compareWith:[0,"cdkListboxCompareWith","compareWith"],navigationWrapDisabled:[2,"cdkListboxNavigationWrapDisabled","navigationWrapDisabled",core.booleanAttribute],navigateDisabledOptions:[2,"cdkListboxNavigatesDisabledOptions","navigateDisabledOptions",core.booleanAttribute]},outputs:{valueChange:"cdkListboxValueChange"},exportAs:["cdkListbox"],standalone:!0,features:[core["ɵɵProvidersFeature"]([{provide:fesm2022_forms.kq,useExisting:(0,core.forwardRef)((()=>CdkListbox)),multi:!0}]),core["ɵɵInputTransformsFeature"]]})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](CdkListbox,[{type:core.Directive,args:[{selector:"[cdkListbox]",standalone:!0,exportAs:"cdkListbox",host:{role:"listbox",class:"cdk-listbox","[id]":"id","[attr.tabindex]":"_getTabIndex()","[attr.aria-disabled]":"disabled","[attr.aria-multiselectable]":"multiple","[attr.aria-activedescendant]":"_getAriaActiveDescendant()","[attr.aria-orientation]":"orientation","(focus)":"_handleFocus()","(keydown)":"_handleKeydown($event)","(focusout)":"_handleFocusOut($event)","(focusin)":"_handleFocusIn()"},providers:[{provide:fesm2022_forms.kq,useExisting:(0,core.forwardRef)((()=>CdkListbox)),multi:!0}]}]}],(()=>[]),{id:[{type:core.Input}],enabledTabIndex:[{type:core.Input,args:["tabindex"]}],value:[{type:core.Input,args:["cdkListboxValue"]}],multiple:[{type:core.Input,args:[{alias:"cdkListboxMultiple",transform:core.booleanAttribute}]}],disabled:[{type:core.Input,args:[{alias:"cdkListboxDisabled",transform:core.booleanAttribute}]}],useActiveDescendant:[{type:core.Input,args:[{alias:"cdkListboxUseActiveDescendant",transform:core.booleanAttribute}]}],orientation:[{type:core.Input,args:["cdkListboxOrientation"]}],compareWith:[{type:core.Input,args:["cdkListboxCompareWith"]}],navigationWrapDisabled:[{type:core.Input,args:[{alias:"cdkListboxNavigationWrapDisabled",transform:core.booleanAttribute}]}],navigateDisabledOptions:[{type:core.Input,args:[{alias:"cdkListboxNavigatesDisabledOptions",transform:core.booleanAttribute}]}],valueChange:[{type:core.Output,args:["cdkListboxValueChange"]}],options:[{type:core.ContentChildren,args:[CdkOption,{descendants:!0}]}]});class CdkListboxCustomSanitizer extends platform_browser.DomSanitizer{constructor(){super()}sanitize(context,value){return context===core.SecurityContext.HTML&&"string"==typeof value?this._sanitizeHtml(value):value}_sanitizeHtml(html){return html=(html=(html=(html=(html=html.replace(/<(script|iframe|object|embed|form|meta|style|link|base)[^>]*>[\s\S]*?<\/\1>/gi,"")).replace(/\son\w+="[^"]*"/gi,"")).replace(/\son\w+='[^']*'/gi,"")).replace(/\shref=['"](javascript:)[^'"]*['"]/gi,'href="#"')).replace(/\ssrc=['"](javascript:)[^'"]*['"]/gi,"")}bypassSecurityTrustHtml(value){return value}bypassSecurityTrustStyle(value){return value}bypassSecurityTrustScript(value){return value}bypassSecurityTrustUrl(value){return value}bypassSecurityTrustResourceUrl(value){return value}static{this.ɵfac=function CdkListboxCustomSanitizer_Factory(__ngFactoryType__){return new(__ngFactoryType__||CdkListboxCustomSanitizer)}}static{this.ɵprov=core["ɵɵdefineInjectable"]({token:CdkListboxCustomSanitizer,factory:CdkListboxCustomSanitizer.ɵfac,providedIn:"root"})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](CdkListboxCustomSanitizer,[{type:core.Injectable,args:[{providedIn:"root"}]}],(()=>[]),null);const EXPORTED_DECLARATIONS=[CdkListbox,CdkOption];class CdkListboxModule{static{this.ɵfac=function CdkListboxModule_Factory(__ngFactoryType__){return new(__ngFactoryType__||CdkListboxModule)}}static{this.ɵmod=core["ɵɵdefineNgModule"]({type:CdkListboxModule,imports:[CdkListbox,CdkOption],exports:[CdkListbox,CdkOption]})}static{this.ɵinj=core["ɵɵdefineInjector"]({providers:[{provide:platform_browser.DomSanitizer,useClass:CdkListboxCustomSanitizer}]})}}("undefined"==typeof ngDevMode||ngDevMode)&&core["ɵsetClassMetadata"](CdkListboxModule,[{type:core.NgModule,args:[{imports:[...EXPORTED_DECLARATIONS],exports:[...EXPORTED_DECLARATIONS],providers:[{provide:platform_browser.DomSanitizer,useClass:CdkListboxCustomSanitizer}]}]}],null,null)}}]);